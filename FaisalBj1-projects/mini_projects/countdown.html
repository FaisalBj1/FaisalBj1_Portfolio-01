<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Countdown</title>

        <!-- FaisalBj1 -->
        <style>:root {display:none;}</style>
        <script type="module" id="main_js" src="/main.js"></script>

        <style>
            #countdown {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                text-align: center;
                padding: 20px;
                box-sizing: border-box;
                gap: 3rem;
            }

            .time-unit {
                margin: 10px;
                min-width: 60px;
                font-size: 1.5rem;
            }

            .number {
                color: var(--clr-primary-light);
                font-size: 2em;
                line-height: 1;
            }

            .text {
                color: var(--clr-primary-dark);
                font-size: 1em;
                margin-top: 0.5em;
            }

            @media (max-width: 480px) {
                #countdown {
                    flex-direction: column;
                }
                .time-unit {
                    margin: 5px;
                    min-width: 50px;
                }
            }
        </style>
    </head>
    <body>
        <main>
            <div id="menu">
                <input type="datetime-local" id="targetDate" style="display:none;">
                <button onclick="setCountdown()" style="display:none;">Set Countdown</button>
            </div>
            <div id="countdown">
                <div class="time-unit">
                    <span class="number" id="days"></span>
                    <div class="text">Days</div>
                </div>
                <div class="time-unit">
                    <span class="number" id="hours"></span>
                    <div class="text">Hours</div>
                </div>
                <div class="time-unit">
                    <span class="number" id="minutes"></span>
                    <div class="text">Minutes</div>
                </div>
                <div class="time-unit">
                    <span class="number" id="seconds"></span>
                    <div class="text">Seconds</div>
                </div>
            </div>
            <script>
                const countdown = document.getElementById('countdown');
                const daysSpan = document.getElementById('days');
                const hoursSpan = document.getElementById('hours');
                const minutesSpan = document.getElementById('minutes');
                const secondsSpan = document.getElementById('seconds');

                let targetDate = new Date(new Date().getFullYear() + 1, 0, 1); // Default to next year's January 1st at 00:00

                function updateCountdown() {
                    const now = new Date();
                    const timeDiff = targetDate - now;

                    // Calculate time units
                    const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);

                    // Update the countdown
                    daysSpan.textContent = days;
                    hoursSpan.textContent = hours;
                    minutesSpan.textContent = minutes;
                    secondsSpan.textContent = seconds;

                    if (timeDiff <= 0) {
                        clearInterval(interval); // Stop the countdown
                        // Any additional logic for when countdown reaches 0
                    }
                }

                let interval = setInterval(updateCountdown, 1000); // Update every second for better performance

                function setCountdown() {
                    const userDate = document.getElementById('targetDate').value;
                    if (userDate) {
                        const targetTime = new Date(userDate);
                        if (targetTime > new Date()) {
                            targetDate = targetTime;
                            clearInterval(interval); // Clear the existing interval
                            interval = setInterval(updateCountdown, 1000); // Update the countdown every second
                        } else {
                            alert("Please choose a future date and time.");
                        }
                    }
                }
            </script>
        </main>
    </body>
</html>
